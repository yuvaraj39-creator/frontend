<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Courses | U1 Technology</title>
    <link rel="icon" type="image/png" href="img/favicon-16x16.png">

    <script src="config.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #800020;
            --primary-dark: #600018;
            --primary-light: #a0334d;
            --secondary: #660099;
            --secondary-dark: #b01030;
            --secondary-light: #e34362;
            --white: #ffffff;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --black: #000000;
        }

        body {
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        .course-card {
            transition: all 0.3s ease;
            border: 1px solid var(--gray-200);
        }

        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        .category-chip {
            transition: all 0.3s ease;
            background-color: var(--gray-100);
            color: var(--gray-800);
        }

        .category-chip:hover {
            background-color: var(--primary);
            color: var(--white);
        }

        .active-category {
            background-color: var(--primary);
            color: white;
        }

        .courses-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .promo-banner {
            height: 300px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        .promo-banner::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.4);
        }

        .promo-content {
            position: relative;
            z-index: 1;
        }

        .header-search {
            transition: all 0.3s ease;
            width: 400px;
            max-width: 100%;
        }

        .header-search:focus-within {
            width: 500px;
        }

        .category-dropdown {
            position: relative;
        }

        .category-dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            z-index: 1000;
            display: none;
            min-width: 200px;
            background-color: white;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border-radius: 0.375rem;
        }

        .category-dropdown:hover .category-dropdown-menu {
            display: block;
        }

        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid var(--primary);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .error-message {
            background-color: #fee2e2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 1rem;
            border-radius: 0.5rem;
            text-align: center;
        }

        .no-courses {
            text-align: center;
            padding: 2rem;
            color: var(--gray-500);
        }

        /* Seller Badge Styles */
        .seller-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 4px;
            margin-bottom: 4px;
        }

        .seller-badge.best-seller {
            background-color: #FFD700;
            color: #000000;
        }

        .seller-badge.top-rated {
            background-color: #4ADE80;
            color: #000000;
        }

        .seller-badge.most-popular {
            background-color: #60A5FA;
            color: #000000;
        }

        .seller-badge.trending-now {
            background-color: #F97316;
            color: #FFFFFF;
        }

        .seller-badge.student-favorite {
            background-color: #A855F7;
            color: #FFFFFF;
        }

        .seller-badge.bestseller {
            background-color: #FACC15;
            color: #000000;
        }

        .seller-badge.hot-pick {
            background-color: #EF4444;
            color: #FFFFFF;
        }

        .seller-badge.editors-choice {
            background-color: #3B82F6;
            color: #FFFFFF;
        }

        .seller-badge.featured-course {
            background-color: #10B981;
            color: #FFFFFF;
        }

        .seller-badge.highly-recommended {
            background-color: #EAB308;
            color: #000000;
        }

        .seller-badge.top-choice {
            background-color: #6366F1;
            color: #FFFFFF;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .show-all-btn {
            background-color: var(--primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .show-all-btn:hover {
            background-color: var(--primary-dark);
        }

        .category-section {
            margin-bottom: 3rem;
        }

        /* Skeleton Loading Styles */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes loading {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: -200% 0;
            }
        }

        .skeleton-card {
            height: 320px;
            border-radius: 8px;
            overflow: hidden;
        }

        .skeleton-image {
            height: 192px;
            width: 100%;
        }

        .skeleton-text {
            height: 16px;
            margin: 8px 0;
        }

        .skeleton-text.short {
            width: 60%;
        }

        .skeleton-text.medium {
            width: 80%;
        }

        .skeleton-rating {
            height: 16px;
            width: 100px;
            margin: 8px 0;
        }

        .skeleton-price {
            height: 20px;
            width: 80px;
            margin: 8px 0;
        }

        .skeleton-button {
            height: 32px;
            width: 100px;
            border-radius: 4px;
        }

        .skeleton-category {
            height: 40px;
            width: 120px;
            border-radius: 20px;
            margin: 0 8px 8px 0;
        }

        .category-nav-container {
            overflow-x: auto;
            white-space: nowrap;
            padding: 16px 0;
            margin-bottom: 16px;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        .category-nav-container::-webkit-scrollbar {
            display: none;
        }

        .category-nav {
            display: inline-flex;
            gap: 8px;
        }

        /* New Header Layout */
        .header-grid {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            height: 100%;
        }

        .header-center {
            display: flex;
            justify-content: center;
        }

        .header-right {
            display: flex;
            justify-content: flex-end;
        }

        .nav-link {
            padding: 0.5rem 1rem;
            font-weight: 500;
            color: var(--gray-700);
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .nav-link.active {
            color: var(--primary);
        }
    </style>
</head>

<body class="font-sans bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container">
            <!-- Top Header -->
            <div class="flex justify-between h-16 relative">
                <!-- Left: Logo -->
                <div class="flex items-center">
                    <div class="flex-shrink-0 flex items-center">
                        <img src="img/favicon-32x32.png" alt="logo">
                        <span class="text-xl font-bold text-gray-900 ml-2">U1 Technology</span>
                    </div>
                </div>

                <!-- Center: Search Bar -->
                <div class="hidden md:flex items-center">
                    <div class="relative header-search">
                        <input type="text" id="header-search-input" placeholder="Search courses..."
                            class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#800020] focus:border-transparent">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                </div>

                <!-- Right: Navigation Links -->
                <div class="hidden md:flex items-center space-x-4">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="courses.html" class="nav-link active">Courses</a>
                    <a href="quiz.html" class="nav-link">Quiz</a>
                    <a href="index.html#contact" class="nav-link">Contact</a>
                </div>

                <!-- Mobile menu button -->
                <div class="md:hidden flex items-center">
                    <button type="button"
                        class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-[#800020]"
                        aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>

            <!-- Category Navigation -->
            <div class="border-t border-gray-200 py-3">
                <div class="category-nav-container">
                    <div class="category-nav" id="category-navigation">
                        <!-- Categories will be loaded here -->
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-category"></div>
                        <div class="skeleton skeleton-category"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile menu -->
        <div class="md:hidden hidden" id="mobile-menu">
            <div class="pt-2 pb-3 space-y-1">
                <a href="index.html"
                    class="border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Home</a>
                <a href="courses.html"
                    class="bg-[#800020]/10 border-[#800020] text-[#800020] block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Courses</a>
                <a href="#"
                    class="border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Quiz</a>
                <a href="#"
                    class="border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700 block pl-3 pr-4 py-2 border-l-4 text-base font-medium">Contact</a>
                <div class="px-4 py-2">
                    <div class="relative">
                        <input type="text" id="mobile-search-input" placeholder="Search courses..."
                            class="w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#800020] focus:border-transparent">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container py-8">
        <!-- Main Content -->
        <div>
            <!-- Search Bar (for mobile) -->
            <div class="mb-8 md:hidden">
                <div class="relative w-full">
                    <input type="text" id="search-input-mobile" placeholder="Search courses..."
                        class="w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#800020] focus:border-transparent">
                    <i class="fas fa-search absolute left-4 top-4 text-gray-400"></i>
                </div>
            </div>
            
            <!-- Promo Banner -->
            <div id="promo-banner-container">
                <!-- Promo banner will be loaded here -->
            </div>

            <!-- Search Results Section (Hidden by default) -->
            <div id="search-results-container" class="hidden">
                <div class="section-header">
                    <h2 class="text-2xl font-bold text-gray-900">Search Results</h2>
                    <button class="show-all-btn" id="clear-search-btn">
                        Clear Search
                    </button>
                </div>
                <div id="search-results-courses" class="courses-grid">
                    <!-- Search results will be displayed here -->
                </div>
            </div>

            <!-- Featured Courses Section -->
            <div class="category-section" id="featured-section">
                <div class="section-header">
                    <h2 class="text-2xl font-bold text-gray-900">Featured Courses</h2>
                    <button class="show-all-btn hidden" id="show-all-featured">
                        Show All
                    </button>
                </div>
                <div id="featured-courses-container" class="courses-grid">
                    <!-- Skeleton loading for featured courses -->
                    <div class="skeleton-card bg-white rounded-lg overflow-hidden shadow-sm">
                        <div class="skeleton skeleton-image"></div>
                        <div class="p-4">
                            <div class="skeleton skeleton-text medium"></div>
                            <div class="skeleton skeleton-text short"></div>
                            <div class="skeleton skeleton-rating"></div>
                            <div class="flex items-center justify-between mt-4">
                                <div class="skeleton skeleton-price"></div>
                                <div class="skeleton skeleton-button"></div>
                            </div>
                        </div>
                    </div>
                    <div class="skeleton-card bg-white rounded-lg overflow-hidden shadow-sm">
                        <div class="skeleton skeleton-image"></div>
                        <div class="p-4">
                            <div class="skeleton skeleton-text medium"></div>
                            <div class="skeleton skeleton-text short"></div>
                            <div class="skeleton skeleton-rating"></div>
                            <div class="flex items-center justify-between mt-4">
                                <div class="skeleton skeleton-price"></div>
                                <div class="skeleton skeleton-button"></div>
                            </div>
                        </div>
                    </div>
                    <div class="skeleton-card bg-white rounded-lg overflow-hidden shadow-sm">
                        <div class="skeleton skeleton-image"></div>
                        <div class="p-4">
                            <div class="skeleton skeleton-text medium"></div>
                            <div class="skeleton skeleton-text short"></div>
                            <div class="skeleton skeleton-rating"></div>
                            <div class="flex items-center justify-between mt-4">
                                <div class="skeleton skeleton-price"></div>
                                <div class="skeleton skeleton-button"></div>
                            </div>
                        </div>
                    </div>
                    <div class="skeleton-card bg-white rounded-lg overflow-hidden shadow-sm">
                        <div class="skeleton skeleton-image"></div>
                        <div class="p-4">
                            <div class="skeleton skeleton-text medium"></div>
                            <div class="skeleton skeleton-text short"></div>
                            <div class="skeleton skeleton-rating"></div>
                            <div class="flex items-center justify-between mt-4">
                                <div class="skeleton skeleton-price"></div>
                                <div class="skeleton skeleton-button"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Category-based Course Sections -->
            <div id="category-sections-container">
                <!-- Category sections will be dynamically generated here -->
                <div class="category-section">
                    <div class="section-header">
                        <h2 class="text-2xl font-bold text-gray-900 skeleton skeleton-text medium"></h2>
                    </div>
                    <div class="courses-grid">
                        <div class="skeleton-card bg-white rounded-lg overflow-hidden shadow-sm">
                            <div class="skeleton skeleton-image"></div>
                            <div class="p-4">
                                <div class="skeleton skeleton-text medium"></div>
                                <div class="skeleton skeleton-text short"></div>
                                <div class="skeleton skeleton-rating"></div>
                                <div class="flex items-center justify-between mt-4">
                                    <div class="skeleton skeleton-price"></div>
                                    <div class="skeleton skeleton-button"></div>
                                </div>
                            </div>
                        </div>
                        <div class="skeleton-card bg-white rounded-lg overflow-hidden shadow-sm">
                            <div class="skeleton skeleton-image"></div>
                            <div class="p-4">
                                <div class="skeleton skeleton-text medium"></div>
                                <div class="skeleton skeleton-text short"></div>
                                <div class="skeleton skeleton-rating"></div>
                                <div class="flex items-center justify-between mt-4">
                                    <div class="skeleton skeleton-price"></div>
                                    <div class="skeleton skeleton-button"></div>
                                </div>
                            </div>
                        </div>
                        <div class="skeleton-card bg-white rounded-lg overflow-hidden shadow-sm">
                            <div class="skeleton skeleton-image"></div>
                            <div class="p-4">
                                <div class="skeleton skeleton-text medium"></div>
                                <div class="skeleton skeleton-text short"></div>
                                <div class="skeleton skeleton-rating"></div>
                                <div class="flex items-center justify-between mt-4">
                                    <div class="skeleton skeleton-price"></div>
                                    <div class="skeleton skeleton-button"></div>
                                </div>
                            </div>
                        </div>
                        <div class="skeleton-card bg-white rounded-lg overflow-hidden shadow-sm">
                            <div class="skeleton skeleton-image"></div>
                            <div class="p-4">
                                <div class="skeleton skeleton-text medium"></div>
                                <div class="skeleton skeleton-text short"></div>
                                <div class="skeleton skeleton-rating"></div>
                                <div class="flex items-center justify-between mt-4">
                                    <div class="skeleton skeleton-price"></div>
                                    <div class="skeleton skeleton-button"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <img src="img/favicon-32x32.png" alt="logo">

                    <h3 class="text-lg font-semibold mb-4">U1 Technology</h3>
                    <p class="text-gray-400">Empowering learners with industry-relevant skills and knowledge.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">About Us</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Courses</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Instructors</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Support</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">Help Center</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Terms of Service</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Privacy Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Connect With Us</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2023 U1 Technology. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // DOM elements - will be initialized after DOM is loaded
        let featuredCoursesContainer;
        let categorySectionsContainer;
        let searchInputMobile;
        let categoryChips;
        let resetBtn;
        let headerSearchInput;
        let promoBannerContainer;
        let showAllFeaturedBtn;
        let categoryNavigation;
        let searchResultsContainer;
        let searchResultsCourses;
        let clearSearchBtn;
        let featuredSection;

        // Global variables
        let allCourses = [];
        let featuredCourses = [];
        let categories = [];
        let expandedSections = new Set();
        let isSearching = false;

        // Format Indian Rupee
        function formatINR(amount) {
            return '₹' + amount.toLocaleString('en-IN');
        }

        // Generate random rating between 4.2 and 4.8
        function generateRandomRating() {
            return (Math.random() * 0.6 + 4.2).toFixed(1);
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize DOM elements
            featuredCoursesContainer = document.getElementById('featured-courses-container');
            categorySectionsContainer = document.getElementById('category-sections-container');
            searchInputMobile = document.getElementById('search-input-mobile');
            categoryChips = document.querySelectorAll('.category-chip');
            resetBtn = document.getElementById('reset-btn');
            headerSearchInput = document.getElementById('header-search-input');
            promoBannerContainer = document.getElementById('promo-banner-container');
            showAllFeaturedBtn = document.getElementById('show-all-featured');
            categoryNavigation = document.getElementById('category-navigation');
            searchResultsContainer = document.getElementById('search-results-container');
            searchResultsCourses = document.getElementById('search-results-courses');
            clearSearchBtn = document.getElementById('clear-search-btn');
            featuredSection = document.getElementById('featured-section');

            // Load initial data
            loadPromoBanner();
            loadCategories();
            loadCourses();

            // Set up event listeners only if elements exist
            setupEventListeners();

            // Mobile menu toggle
            setupMobileMenu();
        });

        // Set up all event listeners
        function setupEventListeners() {
            // Show all featured courses
            if (showAllFeaturedBtn) {
                showAllFeaturedBtn.addEventListener('click', () => {
                    toggleSectionExpansion('featured');
                });
            }

            // Reset filters
            if (resetBtn) {
                resetBtn.addEventListener('click', resetFilters);
            }

            // Search functionality for header search
            if (headerSearchInput) {
                headerSearchInput.addEventListener('input', (e) => {
                    const searchTerm = e.target.value.trim().toLowerCase();
                    if (searchTerm.length > 0) {
                        filterCourses(searchTerm);
                        isSearching = true;
                        showSearchResults();
                    } else {
                        isSearching = false;
                        hideSearchResults();
                    }
                });
            }

            // Search functionality for mobile search
            if (searchInputMobile) {
                searchInputMobile.addEventListener('input', (e) => {
                    const searchTerm = e.target.value.trim().toLowerCase();
                    if (searchTerm.length > 0) {
                        filterCourses(searchTerm);
                        isSearching = true;
                        showSearchResults();
                    } else {
                        isSearching = false;
                        hideSearchResults();
                    }
                });
            }

            // Clear search button
            if (clearSearchBtn) {
                clearSearchBtn.addEventListener('click', () => {
                    clearSearch();
                });
            }
        }

        // Set up mobile menu functionality
        function setupMobileMenu() {
            const mobileMenuButton = document.querySelector('button[aria-controls="mobile-menu"]');
            const mobileMenu = document.getElementById('mobile-menu');

            if (mobileMenuButton && mobileMenu) {
                mobileMenuButton.addEventListener('click', () => {
                    const expanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
                    mobileMenuButton.setAttribute('aria-expanded', !expanded);
                    mobileMenu.classList.toggle('hidden');
                });
            }
        }

        // Reset all filters
        function resetFilters() {
            // Clear active states
            if (categoryChips) {
                categoryChips.forEach(chip => chip.classList.remove('active-category'));
            }

            // Reset search inputs
            if (searchInputMobile) searchInputMobile.value = '';
            if (headerSearchInput) headerSearchInput.value = '';

            // Clear search
            clearSearch();

            // Show all courses
            categorizeCourses();
            displayCourses();
        }

        // Clear search and show normal sections
        function clearSearch() {
            isSearching = false;
            
            // Clear search inputs
            if (searchInputMobile) searchInputMobile.value = '';
            if (headerSearchInput) headerSearchInput.value = '';
            
            // Hide search results
            hideSearchResults();
            
            // Show normal sections
            showNormalSections();
            
            // Reset active category
            if (categoryNavigation) {
                const allChips = categoryNavigation.querySelectorAll('.category-chip');
                if (allChips.length > 0) {
                    allChips.forEach(chip => chip.classList.remove('active-category'));
                    allChips[0].classList.add('active-category');
                }
            }
        }

        // Show search results section
        function showSearchResults() {
            if (searchResultsContainer) {
                searchResultsContainer.classList.remove('hidden');
            }
            
            // Hide normal sections
            hideNormalSections();
        }

        // Hide search results section
        function hideSearchResults() {
            if (searchResultsContainer) {
                searchResultsContainer.classList.add('hidden');
            }
        }

        // Hide normal sections (featured and category sections)
        function hideNormalSections() {
            if (featuredSection) {
                featuredSection.classList.add('hidden');
            }
            if (categorySectionsContainer) {
                categorySectionsContainer.classList.add('hidden');
            }
        }

        // Show normal sections (featured and category sections)
        function showNormalSections() {
            if (featuredSection) {
                featuredSection.classList.remove('hidden');
            }
            if (categorySectionsContainer) {
                categorySectionsContainer.classList.remove('hidden');
            }
        }

        // Load categories from API and display in navigation
        async function loadCategories() {
            try {
                const response = await fetch(`${window.AppConfig.API_BASE_URL}/api/courses/categories`);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();

                if (result.success) {
                    categories = result.data.categories;
                    displayCategoryNavigation();
                }
            } catch (error) {
                console.error('Error loading categories:', error);
                // Continue without categories - the page will still work
            }
        }

        // Display category navigation
        function displayCategoryNavigation() {
            if (!categoryNavigation) return;
            
            // Clear skeleton loading
            categoryNavigation.innerHTML = '';
            
            // Add "All Courses" option
            const allCoursesChip = document.createElement('button');
            allCoursesChip.className = 'category-chip active-category px-4 py-2 rounded-full font-medium text-sm';
            allCoursesChip.textContent = 'All Courses';
            allCoursesChip.addEventListener('click', () => {
                // Remove active class from all chips
                document.querySelectorAll('.category-chip').forEach(chip => {
                    chip.classList.remove('active-category');
                });
                // Add active class to clicked chip
                allCoursesChip.classList.add('active-category');
                // Reset filters
                resetFilters();
            });
            categoryNavigation.appendChild(allCoursesChip);
            
            // Add each category as a chip
            categories.forEach(category => {
                const categoryChip = document.createElement('button');
                categoryChip.className = 'category-chip px-4 py-2 rounded-full font-medium text-sm';
                categoryChip.textContent = category;
                categoryChip.addEventListener('click', () => {
                    // Remove active class from all chips
                    document.querySelectorAll('.category-chip').forEach(chip => {
                        chip.classList.remove('active-category');
                    });
                    // Add active class to clicked chip
                    categoryChip.classList.add('active-category');
                    // Filter by category
                    filterCourses('', category);
                });
                categoryNavigation.appendChild(categoryChip);
            });
        }

        // Load promo banner from API
        async function loadPromoBanner() {
            try {
                const response = await fetch(`${window.AppConfig.API_BASE_URL}/api/posters?status=active&limit=1`);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();

                if (result.success && result.data.posters.length > 0) {
                    const poster = result.data.posters[0];
                    displayPromoBanner(poster);
                } else {
                    // Fallback to default banner
                    displayDefaultBanner();
                }
            } catch (error) {
                console.error('Error loading promo banner:', error);
                displayDefaultBanner();
            }
        }

        // Display promo banner
        function displayPromoBanner(poster) {
            if (!promoBannerContainer) return;

            promoBannerContainer.innerHTML = `
            <div class="promo-banner rounded-lg overflow-hidden mb-10" style="background-image: url('${poster.image}')">
                <div class="h-full flex items-center justify-center promo-content text-white p-8 text-center">
                    <div>
                        <h3 class="text-3xl font-bold mb-4">${poster.title}</h3>
                        <p class="text-xl mb-6">${poster.content[0] || 'Join thousands of students advancing their careers with our courses'}</p>
                        <button class="px-6 py-3 bg-white text-[#800020] rounded-full font-bold hover:bg-gray-100 transition duration-300">
                            Explore All Courses
                        </button>
                    </div>
                </div>
            </div>
        `;
        }

        // Display default banner
        function displayDefaultBanner() {
            if (!promoBannerContainer) return;

            promoBannerContainer.innerHTML = `
            <div class="promo-banner rounded-lg overflow-hidden mb-10" style="background-image: url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80')">
                <div class="h-full flex items-center justify-center promo-content text-white p-8 text-center">
                    <div>
                        <h3 class="text-3xl font-bold mb-4">Start Learning Today</h3>
                        <p class="text-xl mb-6">Join thousands of students advancing their careers with our courses</p>
                        <button class="px-6 py-3 bg-white text-[#800020] rounded-full font-bold hover:bg-gray-100 transition duration-300">
                            Explore All Courses
                        </button>
                    </div>
                </div>
            </div>
        `;
        }

        // Load courses from API
        async function loadCourses() {
            try {
                // Show skeleton loading state
                showSkeletonLoading();

                const response = await fetch(`${window.AppConfig.API_BASE_URL}/api/courses?limit=100`);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const result = await response.json();

                if (result.success) {
                    allCourses = result.data.courses;
                    categorizeCourses();
                    displayCourses();
                } else {
                    showErrorState('Failed to load courses. Please try again later.');
                }
            } catch (error) {
                console.error('Error loading courses:', error);
                showErrorState('Failed to load courses. Please check your connection and try again.');
            }
        }

        // Show skeleton loading state
        function showSkeletonLoading() {
            // Skeleton loading is already implemented in the HTML
            // This function is kept for consistency but doesn't need to do anything
        }

        // Show error state
        function showErrorState(message) {
            const errorHtml = `<div class="error-message">${message}</div>`;

            if (featuredCoursesContainer) {
                featuredCoursesContainer.innerHTML = errorHtml;
            }
            if (categorySectionsContainer) {
                categorySectionsContainer.innerHTML = errorHtml;
            }
        }

        // Categorize courses
        function categorizeCourses() {
            // Reset categories
            featuredCourses = [];

            // Simple categorization logic - you can customize this based on your needs
            allCourses.forEach(course => {
                // Featured courses - courses with highest discount or special flag
                if (course.onlineDiscountPercentage > 30 || course.students > 100) {
                    featuredCourses.push(course);
                }
            });

            // If no featured courses, use first few courses as featured
            if (featuredCourses.length === 0 && allCourses.length > 0) {
                featuredCourses = allCourses.slice(0, Math.min(6, allCourses.length));
            }
        }

        // Filter courses based on search term and category
        function filterCourses(searchTerm = '', category = '') {
            let tempAllCourses = [...allCourses];

            // Apply category filter if specified
            if (category) {
                tempAllCourses = tempAllCourses.filter(course =>
                    course.category && course.category.toLowerCase().includes(category.toLowerCase())
                );
            }

            // Apply search filter if specified
            if (searchTerm) {
                tempAllCourses = tempAllCourses.filter(course =>
                    (course.title && course.title.toLowerCase().includes(searchTerm)) ||
                    (course.description && course.description.toLowerCase().includes(searchTerm)) ||
                    (course.miniDescription && course.miniDescription.toLowerCase().includes(searchTerm)) ||
                    (course.seller && course.seller.toLowerCase().includes(searchTerm)) ||
                    (course.category && course.category.toLowerCase().includes(searchTerm)) ||
                    (course.toolsLanguage && course.toolsLanguage.some(tool => 
                        tool.toLowerCase().includes(searchTerm)
                    ))
                );
            }

            // Display filtered courses in search results
            displaySearchResults(tempAllCourses);
        }

        // Display search results
        function displaySearchResults(courses) {
            if (!searchResultsCourses) return;

            if (courses.length > 0) {
                searchResultsCourses.innerHTML = `
                    <div class="courses-grid">
                        ${courses.map(course => createCourseCard(course)).join('')}
                    </div>
                `;
            } else {
                searchResultsCourses.innerHTML = '<div class="no-courses">No courses found matching your search.</div>';
            }
        }

        // Function to display courses
        function displayCourses(allCoursesToDisplay = null, featuredCoursesToDisplay = null) {
            // Use provided courses if available, otherwise use categorized courses
            const allCoursesData = allCoursesToDisplay || allCourses;
            const featuredCoursesData = featuredCoursesToDisplay || featuredCourses;

            // Display featured courses
            displayFeaturedCourses(featuredCoursesData);

            // Display category-based sections
            displayCategorySections(allCoursesData);
        }

        // Display featured courses section
        function displayFeaturedCourses(featuredCoursesData) {
            if (!featuredCoursesContainer) return;

            if (featuredCoursesData.length > 0) {
                const isExpanded = expandedSections.has('featured');
                const coursesToShow = isExpanded ? featuredCoursesData : featuredCoursesData.slice(0, 4);

                featuredCoursesContainer.innerHTML = `
                <div class="courses-grid">
                    ${coursesToShow.map(course => createCourseCard(course)).join('')}
                </div>
            `;

                // Show "Show All" button if there are more than 4 featured courses
                if (showAllFeaturedBtn) {
                    if (featuredCoursesData.length > 4) {
                        showAllFeaturedBtn.classList.remove('hidden');
                        showAllFeaturedBtn.textContent = isExpanded ? 'Show Less' : 'Show All';
                    } else {
                        showAllFeaturedBtn.classList.add('hidden');
                    }
                }
            } else {
                featuredCoursesContainer.innerHTML = '<div class="no-courses">No featured courses found.</div>';
                if (showAllFeaturedBtn) {
                    showAllFeaturedBtn.classList.add('hidden');
                }
            }
        }

        // Display category-based sections
        function displayCategorySections(allCoursesData) {
            if (!categorySectionsContainer) return;

            categorySectionsContainer.innerHTML = '';

            // Group courses by category
            const coursesByCategory = {};
            allCoursesData.forEach(course => {
                if (course.category) {
                    if (!coursesByCategory[course.category]) {
                        coursesByCategory[course.category] = [];
                    }
                    coursesByCategory[course.category].push(course);
                }
            });

            // Create sections for each category with at least 1 course
            Object.keys(coursesByCategory).forEach(category => {
                const categoryCourses = coursesByCategory[category];
                if (categoryCourses.length > 0) {
                    const isExpanded = expandedSections.has(category);
                    const coursesToShow = isExpanded ? categoryCourses : categoryCourses.slice(0, 4);

                    const sectionId = `category-${category.replace(/\s+/g, '-').toLowerCase()}`;
                    const sectionHtml = `
                    <div class="category-section" id="${sectionId}">
                        <div class="section-header">
                            <h2 class="text-2xl font-bold text-gray-900">${category}</h2>
                            ${categoryCourses.length > 4 ?
                            `<button class="show-all-btn" data-category="${category}">
                                        ${isExpanded ? 'Show Less' : 'Show All'}
                                    </button>` : ''
                        }
                        </div>
                        <div class="courses-grid">
                            ${coursesToShow.map(course => createCourseCard(course)).join('')}
                        </div>
                    </div>
                `;

                    categorySectionsContainer.innerHTML += sectionHtml;
                }
            });

            // Add event listeners to "Show All" buttons
            document.querySelectorAll('.category-section .show-all-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const category = e.target.getAttribute('data-category');
                    toggleSectionExpansion(category);
                });
            });
        }

        // Toggle section expansion
        function toggleSectionExpansion(sectionId) {
            if (expandedSections.has(sectionId)) {
                expandedSections.delete(sectionId);
            } else {
                expandedSections.add(sectionId);
            }

            // Re-render the courses
            displayCourses();
        }

        // Function to create seller badge HTML
        function createSellerBadge(seller) {
            if (!seller) return '';

            const sellerClassMap = {
                'Best Seller': 'best-seller',
                'Top Rated': 'top-rated',
                'Most Popular': 'most-popular',
                'Trending Now': 'trending-now',
                'Student Favorite': 'student-favorite',
                'Bestseller': 'bestseller',
                'Hot Pick': 'hot-pick',
                'Editor\'s Choice': 'editors-choice',
                'Featured Course': 'featured-course',
                'Highly Recommended': 'highly-recommended',
                'Top Choice': 'top-choice'
            };

            const badgeClass = sellerClassMap[seller] || 'best-seller';

            return `<span class="seller-badge ${badgeClass}">${seller}</span>`;
        }

        // Function to create course card HTML
        function createCourseCard(course) {
            // Generate random rating between 4.2 and 4.8
            const rating = generateRandomRating();

            // Check if course has discount
            const hasDiscount = course.onlineOriginalPrice && course.onlineOriginalPrice > course.onlinePrice;

            // Ensure image URL is valid
            const courseImage = course.images && course.images[0]
                ? course.images[0]
                : 'https://images.unsplash.com/photo-1496171367470-9ed9a91ea931?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80';

            return `
            <div class="course-card bg-white rounded-lg overflow-hidden shadow-sm">
                <div class="relative">
                    <img class="w-full h-48 object-cover" src="${courseImage}" alt="${course.title || 'Course Image'}" onerror="this.src='https://images.unsplash.com/photo-1496171367470-9ed9a91ea931?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80'">
                    ${course.seller ?
                    `<div class="absolute top-2 right-2">
                                ${createSellerBadge(course.seller)}
                            </div>` : ''
                }
                </div>
                <div class="p-4">
                    <h3 class="text-lg font-bold text-gray-900 mb-1">${course.title || 'Untitled Course'}</h3>
                    <p class="text-sm text-gray-600 mb-2">${course.category || 'General'}</p>
                    <div class="flex items-center mb-3">
                        <div class="text-yellow-400 mr-1">
                            ${'★'.repeat(Math.floor(rating))}${'☆'.repeat(5 - Math.floor(rating))}
                        </div>
                        <span class="text-sm text-gray-600">${rating}</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <div>
                            <span class="text-lg font-bold text-[#800020]">${formatINR(course.onlinePrice || 0)}</span>
                            ${hasDiscount ?
                    `<span class="text-sm text-gray-500 line-through ml-2">${formatINR(course.onlineOriginalPrice)}</span>` : ''
                }
                        </div>
                        <a href="info.html?id=${course._id}">
                            <button class="px-3 py-1 bg-[#800020] hover:bg-[#600018] text-white text-sm rounded transition duration-300">
                                View Details
                            </button>
                        </a>
                    </div>
                </div>
            </div>
        `;
        }
    </script>
</body>

</html>